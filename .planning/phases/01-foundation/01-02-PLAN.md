---
phase: 01-foundation
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - tailwind.config.ts
  - src/app/globals.css
  - src/lib/utils.ts
  - components.json
  - src/components/ui/button.tsx
  - src/components/ui/input.tsx
  - src/components/ui/label.tsx
  - src/components/ui/card.tsx
  - src/components/ui/form.tsx
autonomous: true

must_haves:
  truths:
    - "All text renders at minimum 18px"
    - "All buttons have minimum 48x48px touch target"
    - "Color contrast meets WCAG 2.1 AA (4.5:1 ratio)"
    - "Focus states are clearly visible for keyboard navigation"
    - "Form labels are always visible (not placeholder-only)"
  artifacts:
    - path: "tailwind.config.ts"
      provides: "Accessible design tokens"
      contains: "fontSize"
    - path: "src/app/globals.css"
      provides: "Base accessible styles"
      contains: "18px"
    - path: "src/components/ui/button.tsx"
      provides: "Accessible button component"
      contains: "min-h-[48px]"
    - path: "src/components/ui/input.tsx"
      provides: "Accessible input component"
      contains: "min-h-[48px]"
  key_links:
    - from: "src/components/ui/button.tsx"
      to: "tailwind.config.ts"
      via: "Tailwind classes"
      pattern: "text-lg|h-12"
    - from: "src/app/globals.css"
      to: "CSS variables"
      via: "shadcn theming"
      pattern: "--foreground|--background"
---

<objective>
Create an accessible design system with shadcn/ui components customized for elderly users (18px+ fonts, 48px touch targets, WCAG AA contrast).

Purpose: Establish visual and interaction patterns that fulfill A11Y-01 to A11Y-09 requirements. All subsequent UI will inherit these accessible defaults.

Output: Configured Tailwind with accessible tokens, shadcn/ui initialized, core form components (Button, Input, Label, Card, Form) customized for accessibility.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Configure Tailwind with accessible design tokens and initialize shadcn/ui</name>
  <files>
    - tailwind.config.ts
    - src/app/globals.css
    - src/lib/utils.ts
    - components.json
  </files>
  <action>
First, initialize shadcn/ui:
```bash
npx shadcn@latest init
```

When prompted:
- Style: Default
- Base color: Slate (or Zinc for higher contrast)
- CSS variables: Yes
- Tailwind config: tailwind.config.ts
- Components directory: src/components
- Utils location: src/lib/utils.ts
- React Server Components: Yes

After initialization, update `tailwind.config.ts` to include accessible defaults:
```typescript
import type { Config } from "tailwindcss";

export default {
  darkMode: ["class"],
  content: [
    "./src/pages/**/*.{js,ts,jsx,tsx,mdx}",
    "./src/components/**/*.{js,ts,jsx,tsx,mdx}",
    "./src/app/**/*.{js,ts,jsx,tsx,mdx}",
  ],
  theme: {
    extend: {
      // Accessible font sizes (18px base minimum)
      fontSize: {
        sm: ['1rem', '1.5rem'],      // 18px (was 14px)
        base: ['1.125rem', '1.75rem'], // 20px
        lg: ['1.25rem', '1.875rem'],   // 22px
        xl: ['1.5rem', '2rem'],        // 27px
        '2xl': ['1.875rem', '2.25rem'], // 34px
      },
      // Minimum touch target sizes
      minHeight: {
        'touch': '48px',
      },
      minWidth: {
        'touch': '48px',
      },
      // Colors configured via CSS variables (shadcn default)
      colors: {
        border: "hsl(var(--border))",
        input: "hsl(var(--input))",
        ring: "hsl(var(--ring))",
        background: "hsl(var(--background))",
        foreground: "hsl(var(--foreground))",
        primary: {
          DEFAULT: "hsl(var(--primary))",
          foreground: "hsl(var(--primary-foreground))",
        },
        secondary: {
          DEFAULT: "hsl(var(--secondary))",
          foreground: "hsl(var(--secondary-foreground))",
        },
        destructive: {
          DEFAULT: "hsl(var(--destructive))",
          foreground: "hsl(var(--destructive-foreground))",
        },
        muted: {
          DEFAULT: "hsl(var(--muted))",
          foreground: "hsl(var(--muted-foreground))",
        },
        accent: {
          DEFAULT: "hsl(var(--accent))",
          foreground: "hsl(var(--accent-foreground))",
        },
        popover: {
          DEFAULT: "hsl(var(--popover))",
          foreground: "hsl(var(--popover-foreground))",
        },
        card: {
          DEFAULT: "hsl(var(--card))",
          foreground: "hsl(var(--card-foreground))",
        },
      },
      borderRadius: {
        lg: "var(--radius)",
        md: "calc(var(--radius) - 2px)",
        sm: "calc(var(--radius) - 4px)",
      },
    },
  },
  plugins: [require("tailwindcss-animate")],
} satisfies Config;
```

Update `src/app/globals.css` with accessible base styles. WCAG AA requires 4.5:1 contrast for normal text:
```css
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Elderly-friendly base font size: 18px minimum */
html {
  font-size: 18px;
}

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;  /* Near-black for max contrast */
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 221.2 83.2% 53.3%;  /* Blue - good contrast on white */
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 36.8%;  /* Minimum 4.5:1 on white */
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 40.2%;  /* Darker red for contrast */
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 71.4%;
    --input: 214.3 31.8% 71.4%;
    --ring: 221.2 83.2% 53.3%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    --primary: 217.2 91.2% 59.8%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 50.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 224.3 76.3% 48%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
  }

  /* Visible focus for keyboard navigation (A11Y-06) */
  :focus-visible {
    outline: 3px solid hsl(var(--ring));
    outline-offset: 2px;
  }
}

/* Utility class for touch targets (A11Y-02) */
@layer components {
  .touch-target {
    @apply min-h-touch min-w-touch;
  }
}
```
  </action>
  <verify>
Run `npm run dev` - page should render without Tailwind errors.
Inspect base font size in browser DevTools - should be 18px.
Check CSS variables are applied (body should have correct background/foreground).
  </verify>
  <done>
Tailwind configured with accessible font sizes (18px base). shadcn/ui initialized. CSS variables set with WCAG AA compliant contrast ratios.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add and customize accessible form components</name>
  <files>
    - src/components/ui/button.tsx
    - src/components/ui/input.tsx
    - src/components/ui/label.tsx
    - src/components/ui/card.tsx
    - src/components/ui/form.tsx
  </files>
  <action>
Install required shadcn/ui components:
```bash
npx shadcn@latest add button input label card form
```

After installation, customize each component for accessibility:

**src/components/ui/button.tsx** - Update variants for 48px minimum touch targets:
Replace the size variants in buttonVariants with:
```typescript
const buttonVariants = cva(
  "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-5 [&_svg]:shrink-0",
  {
    variants: {
      variant: {
        default: "bg-primary text-primary-foreground hover:bg-primary/90",
        destructive:
          "bg-destructive text-destructive-foreground hover:bg-destructive/90",
        outline:
          "border border-input bg-background hover:bg-accent hover:text-accent-foreground",
        secondary:
          "bg-secondary text-secondary-foreground hover:bg-secondary/80",
        ghost: "hover:bg-accent hover:text-accent-foreground",
        link: "text-primary underline-offset-4 hover:underline",
      },
      size: {
        // All sizes meet 48px minimum touch target (A11Y-02)
        default: "h-12 min-w-[48px] px-6 text-lg",
        sm: "h-12 min-w-[48px] px-4 text-base",
        lg: "h-14 min-w-[56px] px-8 text-xl",
        icon: "h-12 w-12",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)
```

**src/components/ui/input.tsx** - Ensure 48px height and visible focus:
Update the Input component className:
```typescript
const Input = React.forwardRef<HTMLInputElement, InputProps>(
  ({ className, type, ...props }, ref) => {
    return (
      <input
        type={type}
        className={cn(
          // Base styles with 48px height (A11Y-02)
          "flex h-12 w-full rounded-md border border-input bg-background px-4 py-2",
          // Accessible text size (A11Y-01)
          "text-lg",
          // Placeholder styling (visible but distinct)
          "placeholder:text-muted-foreground",
          // Focus ring (A11Y-06)
          "focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",
          // Disabled state
          "disabled:cursor-not-allowed disabled:opacity-50",
          // File input adjustment
          "file:border-0 file:bg-transparent file:text-lg file:font-medium",
          className
        )}
        ref={ref}
        {...props}
      />
    )
  }
)
```

**src/components/ui/label.tsx** - Ensure visible labels (A11Y-04):
Update the Label styling:
```typescript
const labelVariants = cva(
  // Labels always visible with good size and weight (A11Y-04)
  "text-base font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
)
```

**src/components/ui/card.tsx** - Ensure readable text and spacing:
The default card component is usually fine, but verify padding allows comfortable reading:
```typescript
const CardContent = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div ref={ref} className={cn("p-6 pt-0", className)} {...props} />
))
```

**src/components/ui/form.tsx** - Error messages accessible (A11Y-05):
Verify FormMessage has visible, accessible error display:
```typescript
const FormMessage = React.forwardRef<
  HTMLParagraphElement,
  React.HTMLAttributes<HTMLParagraphElement>
>(({ className, children, ...props }, ref) => {
  const { error, formMessageId } = useFormField()
  const body = error ? String(error?.message) : children

  if (!body) {
    return null
  }

  return (
    <p
      ref={ref}
      id={formMessageId}
      className={cn(
        // Accessible error message (A11Y-05)
        "text-base font-medium text-destructive",
        className
      )}
      {...props}
    >
      {body}
    </p>
  )
})
```
  </action>
  <verify>
Create a test page at `src/app/page.tsx` that renders:
- Button in different variants/sizes
- Input with label
- Card with content

Visually verify:
- Buttons are at least 48px tall
- Input is at least 48px tall
- Text is at least 18px
- Focus rings are visible when tabbing
  </verify>
  <done>
shadcn/ui components customized: Button (48px touch targets), Input (48px height, 18px text), Label (visible, 18px), Form (accessible error messages). All meet A11Y requirements.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create accessible test page and verify WCAG compliance</name>
  <files>
    - src/app/page.tsx
  </files>
  <action>
Replace `src/app/page.tsx` with a component showcase that demonstrates accessible design:

```typescript
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";

export default function Home() {
  return (
    <main className="min-h-screen p-8">
      <div className="mx-auto max-w-2xl space-y-8">
        <h1 className="text-2xl font-bold">JL Taxes - Design System</h1>
        <p className="text-muted-foreground">
          Accessible components with 18px+ text, 48px touch targets, and WCAG 2.1 AA contrast.
        </p>

        {/* Button showcase */}
        <Card>
          <CardHeader>
            <CardTitle>Buttons</CardTitle>
            <CardDescription>48px minimum height for touch targets</CardDescription>
          </CardHeader>
          <CardContent className="flex flex-wrap gap-4">
            <Button>Default</Button>
            <Button variant="secondary">Secondary</Button>
            <Button variant="outline">Outline</Button>
            <Button variant="destructive">Destructive</Button>
            <Button variant="ghost">Ghost</Button>
            <Button size="lg">Large</Button>
          </CardContent>
        </Card>

        {/* Input showcase */}
        <Card>
          <CardHeader>
            <CardTitle>Form Fields</CardTitle>
            <CardDescription>Labels always visible, 48px input height</CardDescription>
          </CardHeader>
          <CardContent className="space-y-4">
            <div className="space-y-2">
              <Label htmlFor="email">Email address</Label>
              <Input id="email" type="email" placeholder="user@example.com" />
            </div>
            <div className="space-y-2">
              <Label htmlFor="password">Password</Label>
              <Input id="password" type="password" placeholder="Enter your password" />
            </div>
          </CardContent>
        </Card>

        {/* Accessibility checklist */}
        <Card>
          <CardHeader>
            <CardTitle>Accessibility Checklist</CardTitle>
          </CardHeader>
          <CardContent>
            <ul className="list-disc pl-6 space-y-2">
              <li>A11Y-01: Base font 18px minimum</li>
              <li>A11Y-02: Touch targets 48x48px minimum</li>
              <li>A11Y-03: WCAG 2.1 AA contrast (4.5:1)</li>
              <li>A11Y-04: Visible labels on all fields</li>
              <li>A11Y-05: Clear error messages (form validation)</li>
              <li>A11Y-06: Keyboard navigation with visible focus</li>
            </ul>
          </CardContent>
        </Card>
      </div>
    </main>
  );
}
```

Test accessibility:
1. Use browser DevTools to verify font sizes (should be >= 18px)
2. Use keyboard (Tab) to navigate - focus should be clearly visible
3. Use Lighthouse accessibility audit - should score 90+
4. Optional: Test with browser contrast checker extension
  </action>
  <verify>
Run `npm run dev` and visit localhost:3000.
Verify:
- All text is readable (18px+)
- Can tab through all interactive elements
- Focus rings are clearly visible
- Button heights are 48px+ (inspect in DevTools)
Run Lighthouse accessibility audit: should score 90+
  </verify>
  <done>
Test page demonstrates all accessible components. Font size verified at 18px+. Touch targets verified at 48px+. Focus states visible. Lighthouse accessibility score 90+.
  </done>
</task>

</tasks>

<verification>
1. Tailwind configured with accessible font scale (18px minimum)
2. shadcn/ui components installed and customized
3. Button component has 48px minimum height
4. Input component has 48px minimum height
5. Labels are visible (not placeholder-only)
6. Focus rings are clearly visible when navigating with keyboard
7. Test page renders without errors
8. Lighthouse accessibility score >= 90
</verification>

<success_criteria>
- A11Y-01: All text renders at minimum 18px (verified in browser DevTools)
- A11Y-02: All buttons and inputs have minimum 48x48px touch targets
- A11Y-03: Color contrast meets WCAG 2.1 AA (4.5:1 ratio for normal text)
- A11Y-04: Form fields have visible labels (not placeholder-only)
- A11Y-05: Form component supports clear inline error messages
- A11Y-06: Keyboard navigation works with visible focus indicators
- shadcn/ui Button, Input, Label, Card, Form components available
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-02-SUMMARY.md` following the summary template.
</output>
